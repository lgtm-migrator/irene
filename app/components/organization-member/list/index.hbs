{{! template-lint-disable no-partial no-action }}
<form class='py-3'>
  <div class='flex-row'>
    <div local-class='search-input'>
      <AkTextField
        @placeholder='Search user'
        @value={{this.query}}
        @onKeyUp={{perform this.searchUserForQuery}}
      >
        <:leftAdornment>
          <span local-class='search-icon' class='ak-icon ak-icon-search'></span>
        </:leftAdornment>
      </AkTextField>
    </div>

    <div class='flex-row flex-align-center flex-justify-end w-full'>
      <AkFormControlLabel @label={{t 'includeInactiveMembers'}}>
        <AkCheckbox
          @checked={{this.showDeactivated}}
          @onChange={{perform this.showDeactivatedMembers}}
        />
      </AkFormControlLabel>

      {{#if this.me.org.is_owner}}
        <div class='ml-3'>
          <InviteMember @organization={{@organization}} />
        </div>
      {{/if}}
    </div>
  </div>
</form>

{{#if this.hasObjects}}
  <div>
    <AkTable as |t|>
      <t.head @columns={{this.columns}} />
      <t.body @rows={{this.sortedObjects}} as |b|>
        <b.row
          class={{unless b.rowValue.member.isActive 'user-disabled'}}
          as |r|
        >
          <r.cell as |value|>
            {{#if r.columnValue.component}}
              {{#let (component r.columnValue.component) as |Component|}}
                <Component
                  @member={{r.rowValue}}
                  @organization={{@organization}}
                />
              {{/let}}
            {{else}}
              {{value}}
            {{/if}}
          </r.cell>
        </b.row>
      </t.body>
    </AkTable>
  </div>

  <div class='columns'>
    <div class='column'>
      <div class='margin-t-h'>
        {{partial 'paginate'}}
      </div>
    </div>
  </div>
{{else}}
  <div class='empty-state'>
    {{fa-icon 'exclamation-triangle'}}
    {{t 'noMembers'}}
  </div>
{{/if}}